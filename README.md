## BIT-Commercial_Area_Analysis
비트교육센터 프로젝트(상권분석)
클라우드 기반 빅데이터 서비스 개발자 과정 4기

## 목차

1. 프로젝트 선정 개요

    서론
    
    기존 상권 분석 서비스의 문제점
    
2. 프로젝트 범위 및 구성
3. 프로젝트 결과
    
    소프트웨어 아키텍처
    
    통신 순서
    
    웹 페이지
    
    구현
    
4. 개발 도구 및 일정
    
    개발 도구
    
    개발 일정
    
5. 기타
    
    시스템 요구사양
    
    별첨
    
6. 회고
    
    잘한 점
    
    아쉬운 점
   
   

# 1. 프로젝트 선정 개요

## 서론
    
최근 정부 및 각종 공공 기관으로부터 추진되는 수 많은 창업 지원 정책으로 취업 준비생 및 예비 퇴직자 등 사람들로부터 창업에 대한 관심도가 높아지고 있습니다. 통계청에 따르면 21년도 비 경제활동 인구 중 창업에 관심을 가지는 예비 창업자도 약 4백 만명으로 집계됐습니다. 하지만 예비 창업자들은 상황에 맞는 정보를 찾기엔 다소 많은 시간이 소요되고, 찾은 정보들을 어떻게 활용 하느냐에 따라 창업의 성공 가능성은 좌지우지됩니다. 우리는 이러한 어려움을 해결하는 데 도움을 줄 수 있는 웹 서비스를 기획했습니다.
    
본 프로젝트는 소상공인들을 위한 상권 분석을 제공하는 빅데이터 기반의 웹 서비스입니다.
데이터를 수집하여 DB(Data Base)에 저장된 내용을 바탕으로 다양한 분석을 통해 소상공인들이 창업을 희망할 때, 사용자에게 맞는 정보를 제공해주는 맞춤형 서비스입니다.
    
첫 번째 서비스는 지도 위에서 보여지는 업종 현황 파악 서비스입니다.
사용자의 편의성을 고려하여 업종을 군집화 하였고, Zom In을 하면, 선택 업종의 위치 및 상호명을 알 수 있어 선택 업종의 분포도나 경쟁 업체의 현황을 한눈에 확인할 수 있습니다.
    
두 번째로 행정동별 상권 분석은 사용자가 선택한 행정동에 대한 기본 정보를 바탕으로 다양한 그래프를 통해 시각화 하였습니다. 행정동에 대한 기본 정보인 인구, 가구, 매출, 운영 개월, 폐업 가게 등을 기준으로 그래프를 시각화 하였고, 이러한 데이터를 기반으로 다섯 가지 점수 기준을 설계하여 선택한 행정동에 대한 점수를 알 수 있으며, 선택 지역이 몇 등급인지 확인할 수 있습니다.
    
마지막으로는 선택 지역에 대한 추천 업종을 알려줍니다.
첫 번째에서 도출한 선택 업종의 현황, 두 번째에서 도출한 선택 지역의 점수 및 등급을 바탕으로 선택한 지역에 대한 업종을 추천해줍니다.
    

<aside>
💡 본 프로젝트는 위와 같은 정보들을 사용자에게 상황에 맞는 정보를 제공함에 따라 사용자가 이 정보를 활용해 창업의 성공에 조금 가까워 질 수 있는 가능성 제시를 목표로 합니다.

</aside>

## 기존 상권 분석 서비스의 문제점
![image](https://user-images.githubusercontent.com/92079309/201586822-fadbf1a8-ccbc-48d5-82f4-f6ea17135f41.png)

<aside>
💡 기존 상권 분석 서비스는 지역에 따른 업종 분석을 할 때, 해당 업종의 분포도를 알 수 없고, 메뉴에  선택한 업종이나 지역이 선택이 되어있는지 없는지 확인이 어려운 단점이 있습니다.

</aside>

# 2. 프로젝트 범위 및 구성

![image](https://user-images.githubusercontent.com/92079309/201587034-94fd1dec-cf28-4102-b84d-1b96ad9f3be3.png)

1. 관련 지식 습득
   - 지도 구현을 위한 Folium 라이브러리, 시각화를 위한 FusionChart 조사
   - 서버 구현을 위한 AWS, Django 학습
   - 등급화를 위한 상권 분석 기준 설계 방법 학습
2. 개발언어 및 환경 구축
   - 개발 언어 : Python, HTML5, CSS3, Javascript
   - 기술 스택 : Django Rest Framework, Xrdp, FusionChart, AWS RDS,                        MySQL, Bootstrap, Postman
   - 개발 환경 : AWS EC2, Ubuntu, Window10
3. 프로젝트 이행
   - 업종 지도 현황 : 위치를 기준으로 지도 위에 표현
   - 분석 그래프 : 그래프와 점수를 활용하여 분석 및 등급화
   - 서버 구현 : Django를 활용하여 서버 구현 후 AWS EC2 호스팅

# 3. 프로젝트 결과

## 소프트웨어 아키텍처

![image](https://user-images.githubusercontent.com/92079309/201587133-b2cb8396-dea8-42a7-a258-94baa3855c68.png)

💡 Html Form에서 분류 코드명을 받아 submit 하면 rest api를 통해 장고에 전달되고, 값을 통하여 AWS RDS에 있는 정보들을 query로 불러 들여와 작성한 folium함수와 FusionCharts에   값을 전달하여 작성된 템플릿 html 웹페이지에 시각화 해주는 구조입니다.


## 통신 순서
![image](https://user-images.githubusercontent.com/92079309/201587197-ce7d1bd8-00ff-4a01-8096-151b1b4c338c.png)

💡 프로젝트는 Django의 Web FrameWork를 기반으로 MVT 모델을 활용하였으며, Web Server에서 Form모듈을 이용하여 분류 코드를 Json형태로 데이터를 변환하고, 변환된 데이터를 Rest Api를 통해 Django에 전달하여 Browser에 띄워주는 형식의 구조입니다.


## 웹 페이지
![image](https://user-images.githubusercontent.com/92079309/201587319-72aa9394-1cff-4042-9339-b6e8673c0351.png)

          [그림 1] 메인 화면       [그림2] 업종 현황 지도 버튼     [그림3] 분석 결과 버튼

💡 웹 페이지에 접속하면 [그림1]과 같은 화면이 나옵니다. 좌측 상단에 [그림2]와 [그림3]과 같이 각각 2가지 선택할 수 있는 버튼이 존재합니다. [그림2]의 선택박스는 지역/대 분류/중 분류/소 분류로 구성되어 있는 업종 현황 지도로 이동하는 버튼입니다. [그림3]의 선택 박스는 시ㆍ도/구/행정동으로 구성되어 있는 분석 결과로 이동하는 버튼입니다.


![image](https://user-images.githubusercontent.com/92079309/202110038-d851bfd9-110d-46af-b1c9-2af1e0fa445c.png)

        [그림4] 업종 현황 지도(Marker Cluster)

[그림2]에서 지역/대 분류/중 분류/소 분류를 선택하고, 검색 버튼을 누르면 [그림4]와 같은 지도 화면으로 전환됩니다. [그림4]에선 선택한 업종에 대해 어느 지역에 얼마나 분포되어 있는지 한눈에 확인할 수 있습니다.


![image](https://user-images.githubusercontent.com/92079309/202110547-2580de93-3017-44c2-872f-fcac9ca145f9.png)

        [그림5] 업종 현황 지도(Marker)

[그림4]에서 Zoom In을 하게 되면 [그림5]와  같이 선택 업종에 대한 정확한 위치를 알 수 있습니다.


![image](https://user-images.githubusercontent.com/92079309/202110655-2464928e-9725-48af-96a3-cbbb82fa4ccd.png)

         [그림7] 분석 결과(인구 분석)

[그림3]에서 시ㆍ도/구/행정동을 선택하고 검색 버튼을 누르면 [그림7]과 같은 분석 화면으로 전환됩니다.
[그림7]에서는 선택 지역에 대해 인구를 기준으로  남/여 성비, 요일 별 평균 상주 인구,        월 평균 시간 별 상주 인구, 일 평균 나이대 별   상주 인구를 각각의 그래프로 시각화합니다.
            

![image](https://user-images.githubusercontent.com/92079309/202110732-5f737727-9435-497d-bc0d-741249bc8a0f.png)

    [그림8] 분석 결과(가구 및 운영/폐업 분석)

[그림7] 하단에 위치한 [그림8]에서는 가구를 기준으로 한 주택 현황, 세대 수 그래프와      오픈/폐업을 기준으로 한 운영 개월 수, 오픈/폐업 가게 수 그래프를 시각화합니다.

![image](https://user-images.githubusercontent.com/92079309/202110822-ec91f8c8-d8f4-449c-953f-5892f9649708.png)

                                   [그림9] 분석 결과(학교 현황)

![image](https://user-images.githubusercontent.com/92079309/202110898-37232095-067c-47f0-afde-c700fcc6f06d.png)

             [그림10] 평가 종합

[그림10]에서는 선택 지역에 대한 평가 종합 점수 및 등급을 시각화합니다.
접근성, 집객력, 구매력, 안정성, 성장성 5가지 평가 기준으로 점수화하여 다각형 그래프로  표현하였고, 5가지 평가 기준을 더한 총 점수를 1~5등급으로 등급화하여 게이지 그래프로    시각화하였습니다. 점수 및 등급을 기반으로 선택 지역에 대한 업종을 추천해줍니다.

![image](https://user-images.githubusercontent.com/92079309/202110981-a92560e1-4942-440f-99fc-8babd030c221.png)

              [그림11] 접근성

5가지 평가 기준 중 첫 번째인 접근성입니다.
상권별 점수로는 총 10점으로 아파트가/병원가/단독 주택가/혼합형/특수 상권으로 나눴고,  다섯 가지 상권 별로 A,B,C 급지로 나누어 점수를 다르게 부여하였습니다. 버스 이용자 수는 총 5점으로 선택 지역 내 하루 평균 버스 이용자 수입니다. 지하철 이용자 수는 총 5점으로 선택 지역 내 하루 평균 지하철 이용자 수입니다. 접근성의 급지 평가에 대한 자세한 설명은 [별첨]을 참고합니다. 아래 텍스트는 접근성을 점수화한 데이터의 수치들을 나타내어 줍니다.

![image](https://user-images.githubusercontent.com/92079309/202111040-169df2a1-e164-410b-8985-a707b45b2ba9.png)

              [그림12] 집객력

5가지 평가 기준 중 두 번째인 집객력입니다.
유동 인구는 선택 지역 내 면적 당 유동 인구 수입니다. (유동 인구 1000명 당 0.1점)
배후 주거 인구는 선택 지역 내 면적 당 주거 인구 수입니다. (배후 주거 인구 1000명 당 0.1점) 배후 직장 인구는 선택 지역 내 면적 당 직장 인구 수입니다. (배후 직장 인구 1000명 당 0.1점)아래 텍스트는 집객력을 점수화한 데이터의  수치들을 나타내어 줍니다.

![image](https://user-images.githubusercontent.com/92079309/202111133-abf2f665-9800-4441-a3fd-dd9e8583c081.png)

              [그림13] 구매력

5가지 평가 기준 중 세 번째인 구매력입니다.
상권 매출 규모는 선택 지역 내 면적 당 매출액입니다. (매출액 1000당 0.1점)
직장 인구 소비 수준은 선택 지역 내 직장 인구  월 평균 소비규모입니다. (소비규모 100당 0.5점) 주거 인구 소비 수준은 선택 지역 내 주거 인구  월 평균 소비규모입니다. (소비규모 10당 0.1점) 아래 텍스트는 구매력을 점수화한 데이터의  수치들을 나타내어 줍니다.

![image](https://user-images.githubusercontent.com/92079309/202111236-c19a00f2-17b8-4cad-af5b-98051d635bd8.png)

              [그림14] 안정성

5가지 평가 기준 중 네 번째인 안정성입니다.
변동성은 상권의 변동률입니다. (변동률 100당 2.5점) 운영 연수는 선택 지역 점포 평균 운영 연수입니다. (백분위 5/25/50/75/100으로 나누어 점수화) 휴/폐업률은 휴/폐업 점포의 비율입니다. (폐업 점포 비율 48/52/54/57/67로 나누어 점수화) 아래 텍스트는 안정성을 점수화한 데이터의 수치들을 나타내어 줍니다.

![image](https://user-images.githubusercontent.com/92079309/202111324-abeb9456-3175-469a-8558-c435a6a8b8a7.png)

               [그림15] 성장성

5가지 평가 기준 중 마지막인 성장성입니다.
공급 대비 수요는 사업체 수 대비 생활 인구    비율입니다. (비율 100당 0.5점)
창업률은 선택 지역 내 사업체 창업률입니다.    (창업률 10당 0.1점) 변화지표는 선택 지역     내 전년 대비 변화도입니다. (축소, 정체, 확장,   활발 4가지로 나누어 1~5점으로 점수화)
아래 텍스트는 성장성을 점수화한 데이터의 수치들을 나타내어 줍니다.

    
## 구현

1. 데이터
    - 데이터 수집
    1-1) 서울시 행정동 별 데이터
    인구(직업별, 나이별, 시간대별, 유동 인구별, 성비, 상주인구), 주택(세대별, 가구 현황),                매출(소비 규모, 매출액, 공급/수요)
    기타(운영 개월 수, 폐업 가게 수, 변동률, 면적, 창업률, 버스 이용자 수, 지하철 이용자 수 등)
    1-2) 서울시 동 별 학교 인원수 , 학교 수
    - 데이터 전처리
    2-1) crawling 한 데이터 DB에 전처리 후 저장
    2-2) 다운로드 한 데이터 DB에 전처리 후 저장
2. Django FrameWork
    - Django
    2-1) 앱 생성 후 MVT 모델 구현
    2-2) MYSQL , Django 연동
    2-3) [models.py](http://models.py/) , [serializer.py](http://serializer.py/) 정의
    2-4) AWS RDS 연동
3. Rest Api
3-1) CRUD를 통해 서버와 클라이언트 간에 요청 응답
3-2) DB에서 위도 경도 값을 받아 지역 별 업종 분포도 생성
3-3) DB에서 사용자의 요청에 따른 값을 받아 분석
4. 데이터 분석
4-1) Rest Api POST를 통해 DB에 내용 호출 한 뒤 안정성, 접근성, 구매력, 성장성, 집객력 분석
4-2) Fusion Chart를 통해 시각화
4-3) 해당 점수에 따른 등급 판정
4-4) 분석 결과를 통해 선택 지역에 업종 추천
5. front-end
5-1) bootstrap4 적용 및 수정
5-2) 데이터 분석 값 FusionChart로 시각화 후 페이지에  표현

# 4. 개발 도구 및 일정

## 개발 도구

- 개발 환경 : Window10, Linux
- 개발 언어 : Python, HTML5, CSS3, Javascript
- 사용 기술 : Rest Api, Django framework, Xrdp, MobaXterm, Postman, git, FusionChart, Bootstrap
- 개발 도구 : GitHub, Pycharm Community Edition, AWS EC2, MySQL Workbench
- 사용DB : MySQL, AWS RDS

## 개발 일정

- 12/27(월) ~ 12/31(금) : 프로젝트 기획 - 프로젝트 기획 및 주제 선정, 기획안 작성, 아이디어 선정
- 1/3(월) ~ 1/7(금) : 데이터 수집 - 수집 절차 정의, 필요 데이터 선정 및 수집
- 1/10(월) ~ 1/14(금) : 데이터 전처리 - 데이터 정제 및 정규화
- 1/17(월) ~ 1/28(금) : Django 모델 구현 - Django MVT 모델 구현, 지도 기능 구현
- 1/31(월) ~ 2/4(금) : Rest Framework 서버 구축
- 2/7(월) ~ 2/11(금) : 분석 및 프론트엔드 - 분석 기능 구현, Bootstrap 템플릿 적용, 웹 기능 구현
- 2/14(월) ~ 3/2(수) : 분석 내용 및 기능 추가, 코드 리펙토링

 

# 5. 기타

## 시스템 요구사양

- ubuntu : 20.04
- python : 3.8.5
- MySQL : 8.0.23
- bootstrap4 : 21.2
- conda : 4.5.12
- pymysql : 1.0.2
- Django : 3.1.3

## 별첨


    1. 급지평가(10점)
    - 아파트가
    A급지 = 7~10점
    20평 이상이 80%이상이며 1500세대 이상 이고 통행량 15000명 이상 최고 점수 10점,         일 통행량 1000명 당 0.1점
    b급지 = 4~6
    20평 이상이 80% 800세대 이상 이고 통행량 8000명이상 최고 점수 6점,                               일 통행량 500명 당 0.1점
    c급지 = 0~3
    20평 이상이 80% 800세대 미만 이고 통행량 5000명 미만 최고 점수 3점,                              일 통행량 500명 당 0.1점
    - 병원가
    A급지 = 7~10점
    베드 수 400베드 이상 통행량 9000명 이상 최고 점수 10점, 일 통행량 1000명 당 0.1점
    B급지 = 4~6 점
    베드 수 200베드 이상 5000명 이상 최고 점수 6점 일 통행량 500명 당 0.1점
    C급지 = 0~3 점
    베드 수 200베드 미만 5000명 미만 최고 점수 3점 일 통행량 500명 당 0.2점
    - 주택가
    A급지 = 7~10점
    2000세대 이상 일 통행량 15000명 이상 최고 점수 10점 일 통행량 1000명 당 0.1점
    B급지 = 4~6 점
    1000세대 이상 일 통행량 5000명 이상 최고 점수 6점 일 통행량 500명 당 0.1점
    C급지 = 0~3 점
    1000세대 미만 일 통행량 5000명 미만 최고 점수 6점 일 통행량 500명 당 0.2점
    - 혼합형
    A급지 = 7~10 점
    베드수가 400개 이상이고 통행량이 15000명 이상 = 7점, 16000명 이상 7.1점,               20000명 이상 점, 일 통행량 1000명 당 0.1점
    B급지 = 4~6 점
    베드수가 200개 이상 통행량이 8000명 = 8점, 14000명 = 14점, 일 통행량 1000명 당 1점
    C급지 = 0~3 점
    베드수 200개 미만 통행량이 0~7000명 = 0점~7점, 일 통행량 1000명 당 1점
    - 특수상권
    A급지 = 7~10점
    일 통행량 20000명 이상 최고 점수 10점 일 통행량 1000명 당 0.1점
    B급지 = 4~6
    일 통행량 15000명 이상 최고 점수 10점 일 통행량 500명 당 0.1점
    C급지 = 0~3
    일 통행량 15000명 미만 최고 점수 10점 일 통행량 500명 당 0.1점
        
        하루 평균 버스 이용자 수(5점)
        일 평균 버스 이용자 수 3000명 당 0.1점
        
        하루 평균 지하철 이용자 수(5점)
        일 평균 지하철 이용자 수 2000명 당 0.1점
        

# 6. 회고

## 잘한 점

1.  비트교육센터에서 배운 AWS, DB, Programming 등 다양한 IT기술들을 팀 프로젝트를 통해 직접 설계하고, 구현할 수 있는 기회였고, 수업 때 배우지는 못했지만, Framework나 웹 서버, 프론트엔드 같은 부분들도 새롭게 배울 수 있는 계기가 되어 기술적으로 많은 경험이 되었던 것 같습니다. 
2. 상권을 분석하는 방법에 있어 전통적인 상권 분석 방법을 찾아볼 수 있었습니다. 하지만 이런 방법들은 저희의 프로젝트 방향에 있어서 상이한 부분들이 많아 팀원들과 다양한 기준으로 해결책을 생각하고 의견을 조율하면서 전통적인 상권 분석 방법을 우리만의 방식으로 점수화하여 업종에 대한 상권을 등급화 후 분류하는 방법을 고안해 냈습니다. 지역마다 직접 고안한 방법을 적용하여 적합한 업종을 점수를 부여하여 추천할 수 있는 인사이트를 도출했습니다. 
3. 협업이 중요한 팀 프로젝트 특성 상, 팀원들과 소통해야 하는 부분들이 많았습니다. 기획 적인 부분에서 어떤 주제를 선정할지, 기술적으로 어떤 기술을 선택할 지, 기술을 적용하면서 생기는 문제점과 어떻게 해결해야 할 지를 하루 1번 이상 회의하는 시간을 가지면서 공유하고, 서로 부족한 부분을 채워주려 노력하였습니다. 

## 아쉬운 점

1. 2달 이라는 물리적 시간 동안 처음 시도하는 기술들을 배우면서 설계부터 구현까지 해내야 했기 때문에 시간 안에 끝내야 한다는 심리적 압박이 있었습니다. 처음부터 쭉 따라갈 수 있는 로드맵이 없었고, 프로젝트를 해본 인원이 없었기 때문에 처음에는 많은 시행착오들이 있었습니다. 결과적으로 완성도가 다소 떨어지는 코드들이 많았습니다. 프로젝트 막바지에 리펙토링하는 시간들에 더 신경을 썼으면 하는 아쉬움이 남습니다. 
2. 3명 이서 매일같이 만나 아침부터 저녁까지 열심히 노력한 결과이지만, 누구에게 냉정하고, 객관적으로 평가 받지 못해 저희가 만들어낸 결과물의 문제점을 잘 인지하지 못했습니다. 실제 배포 후 사용자들에게 평가를 받아 수정할 수 있는 기회가 있었다면 더 좋은 경험이 되었을 것 같은 생각을 합니다. 
3. ELK를 통한 로그 모니터링, Elastic Search 시각화, Jira 협업 시스템 등 제가 평소 관심을 가지고 있는 기술들을 직접 써보지 못했습니다. 기회가 된다면, 다른 프로젝트나 공부를 통해 익히고 싶습니다.
